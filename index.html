<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sahil — Exam Q&A</title>
<style>
:root {
  --bg: #1b1e23;
  --text: #e6e0d8;
  --muted: #a8b0b7;
  --accent: #58c1aa;
  --accent2: #6fb3e5;
  --card-bg: #23272f;
  --card-border: #333842;
  --radius: 14px;
  --shadow: 0 4px 14px rgba(0,0,0,0.25);
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Inter', sans-serif;
  line-height: 1.9;
  padding: 2rem;
  font-size: 19px;
  overflow-x: hidden;
}

header {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  margin-bottom: 2rem;
  opacity: 0;
  transform: translateY(-20px);
  animation: fadeSlideDown 0.8s forwards;
}
header .brand {
  font-size: 2rem;
  font-weight: 900;
  color: var(--accent);
  margin-bottom: 0.3rem;
  letter-spacing: 1px;
}
header h1 {
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--accent2);
  margin-bottom: 0.8rem;
}
header .name {
  font-size: 0.95rem;
  color: var(--muted);
  font-weight: 500;
  margin-bottom: 0.5rem;
}

header button {
  padding: 0.8rem 1.5rem;
  border-radius: var(--radius);
  background: var(--accent);
  color: var(--bg);
  font-weight: bold;
  border: none;
  cursor: pointer;
  transition: background 0.2s ease, transform 0.1s ease;
}
header button:hover {
  background: #6dd9c0;
  transform: translateY(-2px);
}

.controls {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  margin-bottom: 1.5rem;
  opacity: 0;
  transform: translateY(-15px);
  animation: fadeSlideDown 0.8s forwards 0.3s;
}
.controls input,
.controls select {
  flex: 1;
  min-width: 200px;
  padding: 0.85rem 1.2rem;
  font-size: 1rem;
  border-radius: var(--radius);
  border: 1px solid var(--card-border);
  background: var(--card-bg);
  color: var(--text);
  transition: border 0.2s ease, box-shadow 0.2s ease;
}
.controls input:focus,
.controls select:focus {
  border-color: var(--accent);
  box-shadow: 0 0 10px rgba(88,193,170,0.5);
}
.controls .count {
  align-self: center;
  color: var(--muted);
  font-weight: 500;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px,1fr));
  gap: 1.8rem;
}

.card {
  background: var(--card-bg);
  padding: 1.8rem;
  border-radius: var(--radius);
  border: 1px solid var(--card-border);
  box-shadow: var(--shadow);
  opacity: 0;
  transform: translateY(20px);
  transition: transform 0.4s ease, opacity 0.4s ease, box-shadow 0.3s ease;
}
.card.show {
  opacity: 1;
  transform: translateY(0);
}
.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
}

.question {
  font-size: 1.2rem;
  font-weight: 700;
  margin-bottom: 0.6rem;
  color: var(--accent2);
}
.answer {
  font-size: 1.05rem;
  white-space: pre-wrap;
  color: var(--text);
  opacity: 0.95;
  line-height: 1.95;
}

footer {
  margin-top: 3rem;
  text-align: center;
  font-size: 0.9rem;
  color: var(--muted);
  font-weight: 500;
  border-top: 1px solid #333842;
  padding-top: 1rem;
  opacity: 0;
  transform: translateY(20px);
  animation: fadeSlideUp 0.8s forwards 0.5s;
}

@keyframes fadeSlideDown {
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeSlideUp {
  to { opacity:1; transform: translateY(0); }
}

@media (max-width:768px) {
  body { font-size:18px; }
  .question { font-size:1.1rem; }
  .answer { font-size:1rem; }
}
@media (max-width:480px) {
  .grid { grid-template-columns:1fr; }
}
</style>
</head>
<body>

<div class="container">
  <header>
    <div class="brand">SAHILCODELAB</div>
    <h1>External Preparation</h1>
    <div class="name">Powered by AI • SRGPT</div>
    <button id="copyAll">Copy All Answers</button>
  </header>

  <div class="controls">
    <input type="text" id="searchBox" placeholder="Search…">
    <select id="subjectSelect"><option value="">All Subjects</option></select>
    <div class="count" id="count">Loading…</div>
  </div>

  <div class="grid" id="grid"></div>

  <footer>© 2025 Sahil. All rights reserved.</footer>
</div>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vT4UrGAH6zVI_MOAtuuK1PFMkHItUS6Xo3xcux3qxhy-7iVwiqNnCEs4oGmxaF6-R4vya-Y-p3wpt1p/pub?gid=0&single=true&output=csv";

async function loadCSV(url) {
  const res = await fetch(url);
  const text = await res.text();
  const rows = text.trim().split(/\r?\n/);
  const headers = rows.shift().split(",");
  return rows.map(r => {
    const cols = r.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/);
    const obj = {};
    headers.forEach((h,i)=>obj[h.trim()]=(cols[i]||"").trim());
    return obj;
  });
}

const state={all:[],filtered:[]};
const grid=document.getElementById("grid");
const searchBox=document.getElementById("searchBox");
const subjectSelect=document.getElementById("subjectSelect");
const countEl=document.getElementById("count");
const copyBtn=document.getElementById("copyAll");

function render(list){
  grid.innerHTML=list.map(item=>`
    <div class="card">
      ${item.Subject?`<div class="subject">${item.Subject}</div>`:""}
      <div class="question">
        ${item.Question} ${item.Marks ? `(${item.Marks} marks)` : ""}
      </div>
      <div class="answer">${item.Answer}</div>
    </div>
  `).join("");
  document.querySelectorAll('.card').forEach((c,i)=>{
    setTimeout(()=>c.classList.add('show'),i*80);
  });
  countEl.textContent=`${list.length} of ${state.all.length}`;
}

function applyFilter(){
  const q=searchBox.value.toLowerCase();
  const s=subjectSelect.value;
  state.filtered=state.all.filter(item=>{
    const matchSubj=!s||item.Subject===s;
    const blob=(item.Subject+" "+item.Question+" "+item.Answer).toLowerCase();
    const matchSearch=!q||blob.includes(q);
    return matchSubj&&matchSearch;
  });
  render(state.filtered);
}

copyBtn.addEventListener("click",()=>{
  const text=state.filtered.map(i=>`Q: ${i.Question}\nA: ${i.Answer}`).join("\n\n");
  navigator.clipboard.writeText(text);
  copyBtn.textContent="Copied!";
  setTimeout(()=>copyBtn.textContent="Copy All Answers",1000);
});

searchBox.addEventListener("input",applyFilter);
subjectSelect.addEventListener("change",applyFilter);

(async()=>{
  state.all=await loadCSV(CSV_URL);
  const subs=[...new Set(state.all.map(i=>i.Subject).filter(s=>s))].sort();
  subs.forEach(s=>subjectSelect.appendChild(new Option(s,s)));
  applyFilter();
})();
</script>

</body>
</html>
